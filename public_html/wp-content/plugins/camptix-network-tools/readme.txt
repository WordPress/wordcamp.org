=== CampTix Network Tools ===
Contributors:      automattic, kovshenin, iandunn
Tags:              CampTix, ticketing, event ticketing, multisite, log
Requires at least: 3.5
Tested up to: 	   4.3
Stable tag:        0.2
License:           GPLv2 or later
License URI:       http://www.gnu.org/licenses/gpl-2.0.html

Tools for managing CampTix installations across a WordPress Multisite network.


== Description ==

**Features**

* Network Dashboard
	* Overview of CampTix statistics for each site in the network
	* View and search log entries
	* Lookup transactions details
	* Lookup attendee details
* Log events are captured and stored in a global database table instead of individual site postmeta tables
* Receive e-mail notifications when log events match your custom patterns

*Note: This plugin requires a [WordPress Multisite](http://codex.wordpress.org/Glossary#Multisite) installation in order to work.*

Feel free to post your feature requests, issues and pull requests to [CampTix Network Tools on GitHub](https://github.com/automattic/camptix-network-tools "CampTix on GitHub").


== Installation ==

***Note: In order for this plugin to work, you must have a [WordPress Multisite](http://codex.wordpress.org/Glossary#Multisite) installation already setup, and have a Super Admin account.***

1. Download and extract CampTix Network Tools in your `wp-content/plugins` directory, or search for it in the Plugins page in WordPress.
1. Navigate to the Plugins page in the Network Admin area of WordPress.
1. Network Activate the plugin.

You will then be able to the view the CampTix page under the Dashboard menu of any of your sites.


== Frequently Asked Questions ==

= Where is the CampTix Network Dashboard located? =
The dashboard is located under the Dashboard menu in the Network Admin area (e.g., http://example.org/wp-admin/network/).

= Why don't my sites show up in the Overview tab? =
The data on the Overview tab is only generated once every hour. You can tell when it was last generated by looking at the bottom of the page.

= Why do I get error on the Transactions tab saying credentials weren't found? =

In order to lookup transaction details, CampTix Network Tools needs to know what payment gateway to use, and what your credentials are for it.

You can specify them by setting up a filter callback like the example below. The best place to put the code is inside a [functionality plugin](http://www.doitwithwp.com/create-functions-plugin/).

Currently, transaction lookups are only available with PayPal.

`function camptix_dashboard_paypal_credentials( $credentials ) {
	$credentials = array(
		"sandbox-account" => array(
			'label'         => "Sandbox Account",
			'sandbox'       => true,
			'api_username'  => '',
			'api_password'  => '',
			'api_signature' => '',
		),
		"production-account" => array(
			'label'         => 'Production Account',
			'sandbox'       => false,
			'api_username'  => '',
			'api_password'  => '',
			'api_signature' => '',
		),
	);
	return $credentials;
}
add_filter( 'camptix_dashboard_paypal_credentials', 'camptix_dashboard_paypal_credentials' );`

= How do I get e-mail notifications when log events occur? =
You can use the `camptix_nt_notification_expressions` filter to add custom notifications. For each entry, you'll provide a regular expression that matches a log entry, and an array of e-mail addresses that will be notified whenever a match occurs. The best place to put the code is inside a [functionality plugin](http://www.doitwithwp.com/create-functions-plugin/).

Here's an example of several different patterns being matched and associated with e-mail addresses:

`function camptix_email_notification_expressions( $expressions ) {
	$expressions = array_merge( $expressions, array(
		'/changed to (failed|pending|refund)/'     => array( 'jane@example.org', 'admin@example.net' ),
		'/Error during RefundTransaction/i'        => array( 'admin@example.net' ),
		'/Setting all transactions to refund/i'    => array( 'jane@example.org' ),
		'/Warning during PayPal request/i'         => array( 'admin@example.net', 'jane@example.org' ),
	) );

	return $expressions;
}
add_filter( 'camptix_nt_notification_expressions', 'camptix_email_notification_expressions' );`

For help understanding regular expressions, check out <a href="http://www.marksanborn.net/howto/learning-regular-expressions-for-beginners-the-basics/">Learning Regular Expressions for Beginners</a> and <a href="http://www.zytrax.com/tech/web/regex.htm">Regular Expressions User Guide</a>. You can use <a href="http://gskinner.com/RegExr/">RegExr</a> to test your expressions.


== Screenshots ==

1. Overview of ticket sales and related data across all CampTix installations
1. Log entries for all transactions and other events
1. Lookup payment transaction details
1. Lookup attendee details


== Changelog ==

= 0.2 (2015-04-20) =
* Security: Escape links in wp-admin.

= 0.1 (2013-06-18) =
* Initial release


== Upgrade Notice ==

= 0.2 =
This is a security release. Please update immediately.

= 0.1 =
CampTix Network Tools v0.1 includes a network dashboard, searchable log entries, transaction and attendee records, and e-mail notifications for custom log patterns.